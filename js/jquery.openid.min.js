/*
OpenID Plugin
http://code.google.com/p/openid-realselector/

Martin Conte Mac Donell <Reflejo@gmail.com>
*/
(function(a){a.fn.openid=function(n){var e;var h='openid_username';var f=a('#openid_inputarea').length?a('#openid_inputarea'):a('<div id="openid_inputarea" />');var o={txt:{label:'Enter your {provider} {username}',username:'username',title:'Select your openID provider',sign:'Sign-In'},providers:[{name:'Google',url:'https://www.google.com/accounts/o8/id',label:null,big:true},{name:'Yahoo',url:'http://yahoo.com/',label:null,big:true},{name:'AOL',username_txt:'screenname',url:'http://openid.aol.com/{username}',big:true},{name:'OpenID',username_txt:'url',big:true},{name:'MyOpenID',url:'http://{username}.myopenid.com/'},{name:'Flickr',url:'http://flickr.com/{username}/',},{name:'Technorati',url:'http://technorati.com/people/technorati/{username}/',},{name:'Wordpress',url:'http://{username}.wordpress.com/'},{name:'Blogger',url:'http://{username}.blogspot.com/',},{name:'Verisign',url:'http://{username}.pip.verisignlabs.com/',},{name:'Vidoop',url:'http://{username}.myvidoop.com/',},{name:'ClaimID',url:'http://claimid.com/{username}',},{name:'LiveJournal',url:'http://{username}.livejournal.com',}],cookie_expires:6*30,cookie_path:'/',img_path:'/img/',};var p=function(b,c,g){var q=a('<a title="'+b+'" href="#" id="btn_'+c+'" class="openid_'+g+'_0 '+b+'" />');return q.click(l)};var r=function(b){var c=new Date();c.setTime(c.getTime()+(d.cookie_expires*24*60*60*1000));document.cookie="openid_prov="+b+"; expires="+c.toGMTString()+"; path="+d.cookie_path};var s=function(){var b=document.cookie.split(';');for(i in b){if((pos=b[i].indexOf("openid_prov="))!=-1)return a.trim(b[i].slice(pos+12))}};var l=function(b,c){var g=a(c||this).attr('id').replace('btn_','');if(!(e=d.providers[g]))return;if(highlight=a('#openid_highlight'))highlight.replaceWith(a('#openid_highlight a')[0]);a('#btn_'+g).wrap('<div id="openid_highlight" />');r(g);t();if(e.label===null){f.text(d.txt.title);if(!c){f.fadeOut();j.submit()}}return false};var t=function(){var b=(e.label||d.txt.label).replace('{username}',(e.username_txt!==undefined)?e.username_txt:d.txt.username).replace('{provider}',e.name);f.empty().show().append('<span class="oidlabel">'+b+'</span><input id="'+h+'" type="text"  name="username_txt" class="Verisign"/><input type="submit" value="'+d.txt.sign+'"/>');a('#'+h).focus()};var u=function(){var b=(e.url)?e.url.replace('{username}',a('#'+h).val()):a('#'+h).val();j.append(a('<input type="hidden" name="url" value="'+b+'" />'))};var d=a.extend(o,n||{});var k=a('<div id="openid_btns" />');var m=true;a.each(d.providers,function(b,c){if(!c.big&&m){k.append('<br />');m=false}k.append(p(c.name,b,(c.big)?'large':'small'))});var j=this;j.css({'background-image':'none'});j.append(k).submit(u);k.append(f);if(idx=s())l(null,'#btn_'+idx);else f.text(d.txt.title).show();return this}})(jQuery);
